# John Pratt Portfolio - Frontend Feature Analysis

## Executive Summary

This document provides a comprehensive analysis of all features and technical implementation details of the john-pratt.com portfolio website. The site is built using React, Gatsby 5, GraphQL, and styled-components with standard JavaScript. This analysis serves as the foundation for a TypeScript migration plan.

---

## Technology Stack

### Core Framework & Build Tools
- **React**: v18.0.0
- **Gatsby**: v5.15.0
- **GraphQL**: Built-in with Gatsby
- **Webpack**: v5.98.0
- **Node.js**: >=24.9.0
- **npm**: >=11.6.0

### UI & Styling
- **styled-components**: v6.1.19 (CSS-in-JS)
- **react-transition-group**: v4.4.5 (animations)
- **animejs**: v4.2.0 (advanced animations)
- **scrollreveal**: v4.0.9 (scroll-based animations)

### Gatsby Plugins
- **gatsby-plugin-image**: v3.15.0 (optimized images)
- **gatsby-plugin-sharp**: v5.15.0 (image processing)
- **gatsby-transformer-sharp**: v5.15.0 (image transformations)
- **gatsby-source-filesystem**: v5.15.0 (file sourcing)
- **gatsby-transformer-remark**: v6.15.0 (Markdown processing)
- **gatsby-plugin-styled-components**: v6.15.0
- **gatsby-plugin-preact**: v7.15.0 (React replacement for production)
- **gatsby-plugin-manifest**: v5.15.0 (PWA manifest)
- **gatsby-plugin-offline**: v6.15.0 (service worker - disabled)
- **gatsby-plugin-remove-serviceworker**: v1.0.0
- **gatsby-plugin-sitemap**: v6.15.0 (SEO)
- **gatsby-plugin-robots-txt**: v1.8.0 (SEO)
- **gatsby-plugin-google-gtag**: v5.15.0 (analytics)
- **gatsby-plugin-netlify**: v5.1.1 (deployment optimization)
- **gatsby-adapter-netlify**: v1.2.1

### Markdown & Code Syntax
- **gatsby-remark-prismjs**: v7.15.0 (syntax highlighting)
- **gatsby-remark-images**: v7.15.0 (markdown images)
- **gatsby-remark-external-links**: v0.0.4 (external link handling)
- **gatsby-remark-code-titles**: v1.1.0 (code block titles)
- **prismjs**: v1.20.0

### Development Tools
- **ESLint**: v9.37.0
- **Prettier**: v3.6.2
- **husky**: v9.1.7 (git hooks)
- **lint-staged**: v16.2.3 (pre-commit linting)
- **Babel**: v7.28.4

### Utilities
- **lodash**: v4.17.21
- **prop-types**: v15.8.1
- **bluebird**: v3.7.2

---

## Project Structure

### Source Code Directory

**Note**: The following shows SOURCE CODE only. Directories like `public/`, `.cache/`, and `node_modules/` are GENERATED/INSTALLED and not source code.

```
src/frontend/
├── components/          # React components
│   ├── icons/          # SVG icon components
│   ├── sections/       # Page section components
│   ├── head.js         # SEO/meta component
│   ├── layout.js       # Main layout wrapper
│   ├── nav.js          # Navigation header
│   ├── menu.js         # Mobile menu
│   ├── social.js       # Social media sidebar
│   ├── email.js        # Email sidebar
│   ├── footer.js       # Footer component
│   ├── loader.js       # Initial page loader
│   └── index.js        # Component exports
├── content/            # Markdown content
│   ├── jobs/           # Work experience markdown files
│   ├── certs/          # Certification markdown files
│   ├── featured/       # Featured projects markdown
│   └── posts/          # Blog posts markdown
├── hooks/              # Custom React hooks
│   ├── useScrollDirection.js
│   ├── usePrefersReducedMotion.js
│   └── useOnClickOutside.js
├── pages/              # Gatsby pages
│   ├── index.js        # Homepage
│   ├── 404.js          # 404 page
│   └── blog/
│       ├── index.js    # Blog listing page
│       └── tags.js     # Tag listing page
├── templates/          # Dynamic page templates
│   ├── post.js         # Individual blog post
│   └── tag.js          # Tag archive page
├── styles/             # Global styles
│   ├── GlobalStyle.js  # Global CSS
│   ├── theme.js        # Theme configuration
│   ├── variables.js    # CSS variables
│   ├── mixins.js       # Styled-component mixins
│   ├── fonts.js        # Font definitions
│   ├── PrismStyles.js  # Code syntax styles
│   └── TransitionStyles.js  # Animation styles
├── utils/              # Utility functions
│   ├── sr.js           # ScrollReveal singleton
│   └── index.js        # Utility exports
├── images/             # Static images
├── fonts/              # Custom fonts (Calibre, SF Mono)
├── static/             # Static assets (resume.pdf, etc.)
└── config.js           # Site configuration
```

### Generated/Installed Directories (NOT Source Code)

The following directories are **automatically generated** during build or install and should NOT be edited:

```
.cache/              # Gatsby build cache (generated by gatsby develop/build)
public/              # Final build output - static site files (.html, .js, .css, images)
                     # This is what gets deployed to production
node_modules/        # npm dependencies (installed via npm install)
dist/                # TypeScript build artifacts (if applicable)
```

**Important**:
- These directories are in `.gitignore` and should never be committed
- The `public/` directory is completely regenerated on each build
- `.cache/` speeds up rebuilds but can be safely deleted (run `npm run clean`)

---

## Feature Breakdown

### 1. Core Layout & Navigation

#### Layout Component (`components/layout.js`)
- **Purpose**: Main application wrapper
- **Features**:
  - Lazy loading of page loader component
  - Theme provider integration
  - Global styles injection
  - Accessibility skip-to-content link
  - Conditional loader display (homepage only)
  - External link target handling
  - Hash navigation/scroll to section
- **State Management**:
  - `isLoading` state for loader
- **Props**:
  - `children` (ReactNode)
  - `location` (object)

#### Navigation Header (`components/nav.js`)
- **Purpose**: Fixed header with navigation menu
- **Features**:
  - Animated logo with hover effects
  - Numbered navigation links
  - Scroll direction detection (hide/show on scroll)
  - Blur background with backdrop-filter
  - Responsive mobile menu integration
  - Fade-in animations on mount
  - Resume link with external PDF
  - Reduced motion support
- **State Management**:
  - `isMounted` - animation state
  - `scrolledToTop` - scroll position tracking
- **Custom Hooks**:
  - `useScrollDirection()` - detect scroll up/down
  - `usePrefersReducedMotion()` - accessibility

#### Mobile Menu (`components/menu.js`)
- **Features**: (needs verification - not read yet)
  - Hamburger menu for mobile
  - Overlay navigation
  - Click-outside to close

#### Social Sidebar (`components/social.js`)
- **Purpose**: Fixed sidebar with social media links
- **Features**: (based on pattern)
  - Vertical orientation
  - Social icons (GitHub, LinkedIn)
  - Fade-in animations

#### Email Sidebar (`components/email.js`)
- **Purpose**: Fixed sidebar with email link
- **Features**: (based on pattern)
  - Vertical text orientation
  - Email link with animations

---

### 2. Homepage Sections

#### Hero Section (`components/sections/hero.js`)
- **Purpose**: Landing/intro section
- **Features**: (based on pattern)
  - Animated introduction
  - Name and tagline
  - Call-to-action

#### About Section (`components/sections/about.js`)
- **Purpose**: Personal introduction and skills
- **Features**:
  - Profile image with hover effects (StaticImage from gatsby-plugin-image)
  - Skills list (hardcoded array of 20+ technologies)
  - Bio text with inline links
  - Scroll reveal animations
  - Responsive grid layout (3fr 2fr columns)
  - Image border animation on hover
  - Reduced motion support
- **Technologies Listed**:
  - Cloud: AWS, Azure, GCP
  - IaC: Terraform (OSS, Enterprise)
  - Languages: Python, Bash, PowerShell, JavaScript, Java
  - Frameworks: Node.js, React, Spring Boot, Gatsby
  - Data: Snowflake, SQL
  - Tools: Docker, Kubernetes, HashiCorp Products, Git, GitHub, Bitbucket, Selenium
  - AI: ChatGPT, OpenAI API, Claude, Gemini, DeepSeek

#### Jobs Section (`components/sections/jobs.js`)
- **Purpose**: Work experience display
- **Features**:
  - Tab-based interface for different companies
  - GraphQL query for job data from markdown files
  - Keyboard navigation (arrow keys)
  - Active tab highlighting with animated indicator
  - Accessible ARIA attributes
  - Responsive layout (horizontal tabs → vertical on mobile)
  - HTML content rendering from markdown
  - Scroll reveal animations
- **GraphQL Query**:
  ```graphql
  query {
    jobs: allMarkdownRemark(
      filter: { fileAbsolutePath: { regex: "/src/frontend/content/jobs/" } }
      sort: { frontmatter: { companyRank: ASC } }
    ) {
      edges {
        node {
          frontmatter {
            title
            company
            location
            range
            url
          }
          html
        }
      }
    }
  }
  ```
- **Data Schema**:
  - `title`: Job title
  - `company`: Company name
  - `location`: Work location
  - `range`: Date range
  - `url`: Company website
  - `companyRank`: Sort order

#### Featured Projects Section (`components/sections/featured.js`)
- **Purpose**: Showcase of major projects
- **Features**:
  - Alternating left/right layout
  - Optimized images with gatsby-plugin-image (GatsbyImage)
  - Tech stack badges
  - GitHub and external links
  - Image hover effects with overlay
  - Responsive grid layout
  - Scroll reveal with staggered delays
  - Support for "classified" projects (italic styling)
  - HTML description rendering
- **GraphQL Query**:
  ```graphql
  query {
    featured: allMarkdownRemark(
      filter: { fileAbsolutePath: { regex: "/src/frontend/content/featured/" } }
      sort: { frontmatter: { date: ASC } }
    ) {
      edges {
        node {
          frontmatter {
            title
            cover {
              childImageSharp {
                gatsbyImageData(width: 700, placeholder: BLURRED, formats: [AUTO, WEBP, AVIF])
              }
            }
            tech
            classified
            github
            external
          }
          html
        }
      }
    }
  }
  ```
- **Data Schema**:
  - `title`: Project name
  - `cover`: Project image
  - `tech`: Array of technologies
  - `classified`: Boolean for confidential projects
  - `github`: GitHub repository URL
  - `external`: Live project URL
  - `date`: Sort date

#### Certifications Section (`components/sections/certs.js`)
- **Purpose**: Professional certifications display
- **Features**:
  - Tab-based interface grouped by certification provider
  - Grid layout for multiple certs (2 columns when >9 certs)
  - Active/Expired status badges
  - Date formatting (issue & expiry dates)
  - Keyboard navigation
  - Responsive layout
  - Validation links
  - Company grouping logic
  - Scroll reveal animations
- **GraphQL Query**:
  ```graphql
  query {
    certs: allMarkdownRemark(
      filter: { fileAbsolutePath: { regex: "/src/frontend/content/certs/" } }
      sort: [
        {frontmatter: {companyRank: ASC}},
        {frontmatter: {certRank: ASC}}
      ]
    ) {
      edges {
        node {
          frontmatter {
            title
            certRank
            company
            issueDate
            expiryDate
            url
            show
          }
          html
        }
      }
    }
  }
  ```
- **Data Schema**:
  - `title`: Certification name
  - `company`: Certifying organization
  - `issueDate`: Issue date
  - `expiryDate`: Expiration date (optional)
  - `url`: Verification URL
  - `show`: Visibility flag
  - `certRank`: Sort order within company
  - `companyRank`: Company sort order

#### Projects Section (`components/sections/projects.js`)
- **Status**: Currently disabled (returns null)
- **Purpose**: Additional projects grid (commented out)

#### Contact Section (`components/sections/contact.js`)
- **Purpose**: Contact information and CTA
- **Features**: (needs verification - not read yet)
  - Email link
  - Contact form or direct email

---

### 3. Blog System

#### Blog Index Page (`pages/blog/index.js`)
- **Purpose**: List all blog posts
- **Features**:
  - Grid layout for blog post cards
  - Bookmark icon for each post
  - Hover effects with transform animation
  - Filter out draft posts
  - Date sorting (DESC)
  - SEO Head component with custom title/description
  - Responsive grid (auto-fill minmax pattern)
- **GraphQL Query**:
  ```graphql
  query {
    allMarkdownRemark(
      filter: {
        fileAbsolutePath: { regex: "/src/frontend/content/posts/" }
        frontmatter: { draft: { ne: true } }
      }
      sort: { frontmatter: { date: DESC } }
    ) {
      edges {
        node {
          frontmatter {
            title
            slug
            date
            tags
            draft
          }
          html
        }
      }
    }
  }
  ```

#### Blog Post Template (`templates/post.js`)
- **Purpose**: Individual blog post rendering
- **Features**:
  - Breadcrumb navigation back to blog
  - Tag links (kebab-case URLs)
  - Prism syntax highlighting
  - Custom table styling
  - Inline code styling
  - Draft post handling
  - SEO head with dynamic title
  - Responsive typography
- **GraphQL Query** (parameterized):
  ```graphql
  query($slug: String!) {
    markdownRemark(frontmatter: { slug: { eq: $slug } }) {
      html
      frontmatter {
        title
        draft
        date
        slug
        tags
      }
    }
  }
  ```

#### Tag Archive Template (`templates/tag.js`)
- **Purpose**: Posts filtered by tag
- **Features**: (needs verification - not read yet)
  - Tag-based filtering
  - Similar grid layout to blog index

#### Tags Index Page (`pages/blog/tags.js`)
- **Purpose**: List all tags
- **Features**: (needs verification - not read yet)
  - All available tags
  - Post counts per tag

---

### 4. Custom React Hooks

#### `useScrollDirection()`
- **File**: `hooks/useScrollDirection.js`
- **Purpose**: Detect scroll direction (up/down)
- **Parameters**:
  - `initialDirection`: Starting direction
  - `thresholdPixels`: Minimum scroll distance
  - `off`: Disable hook
- **Returns**: `'up'` or `'down'`
- **Implementation**:
  - Uses `requestAnimationFrame` for performance
  - Threshold-based detection
  - Cleanup on unmount

#### `usePrefersReducedMotion()`
- **File**: `hooks/usePrefersReducedMotion.js`
- **Purpose**: Detect user's motion preferences (accessibility)
- **Returns**: Boolean
- **Implementation**:
  - Checks `prefers-reduced-motion` media query
  - Used to disable animations for accessibility

#### `useOnClickOutside()`
- **File**: `hooks/useOnClickOutside.js`
- **Purpose**: Detect clicks outside element (for modals/menus)
- **Parameters**:
  - `ref`: Element reference
  - `handler`: Callback function

---

### 5. Styling System

#### Global Styles (`styles/GlobalStyle.js`)
- **Features**:
  - CSS custom properties (variables)
  - Custom font imports
  - Responsive typography
  - Scrollbar styling
  - Focus states (keyboard navigation)
  - Accessibility features
  - Numbered heading system
  - Blur effect for modals
  - Skip-to-content link
  - Transition animations
  - Code block styling

#### Theme Configuration (`styles/theme.js`)
- **Contains**:
  - Breakpoints
  - Mixins (flexBetween, flexCenter, inlineLink, etc.)
  - Reusable style patterns

#### CSS Variables (`styles/variables.js`)
- **Defines**:
  - Colors (navy palette, green accent)
  - Font families (Calibre, SF Mono, system fonts)
  - Font sizes (responsive with clamp)
  - Spacing units
  - Border radius
  - Transitions
  - Z-index layers
  - Nav heights

#### Animation Styles
- **TransitionStyles.js**: React transition group styles
- **PrismStyles.js**: Code syntax highlighting theme

#### Custom Fonts
- **Calibre**: Main UI font (Regular, Medium, Semibold)
- **SF Mono**: Monospace font for code

---

### 6. Utility Functions

#### ScrollReveal Manager (`utils/sr.js`)
- **Purpose**: Lazy load and manage ScrollReveal instance
- **Features**:
  - Singleton pattern
  - SSR-safe (checks for window)
  - Dynamic import
  - Shared instance across components

#### Configuration (`config.js`)
- **Contains**:
  - Email address
  - Social media links (GitHub, LinkedIn)
  - Navigation links
  - Brand colors
  - ScrollReveal default config

---

### 7. Build & Deployment

#### Gatsby Node (`gatsby-node.js`)
- **Functions**:
  - `createPages()`:
    - Generates blog post pages from markdown
    - Creates tag archive pages
    - Creates redirect from `/archive` to `/blog`
  - `onCreateWebpackConfig()`:
    - Webpack aliases for imports (@components, @config, etc.)
    - Null loader for SSR-incompatible modules (scrollreveal, animejs)
    - Extension resolution (.js, .jsx, .ts, .tsx)
  - `onPostBuild()`:
    - Copies static assets from `src/frontend/static` to `public`
    - Handles resume.pdf and other static files

#### Gatsby Config (`gatsby-config.js`)
- **Site Metadata**:
  - Title, description, siteUrl, image
- **Adapter**: Netlify adapter for deployment
- **Plugin Configuration**:
  - Preact replacement in production
  - Service worker removal
  - Advanced sitemap with custom serialization
  - Image optimization settings
  - Manifest/PWA settings
  - Google Analytics
  - Robots.txt

#### Gatsby SSR (`gatsby-ssr.js`)
- **Purpose**: Server-side rendering customization
- **Features**: (needs verification - not read yet)

---

### 8. Content Management

#### Markdown Frontmatter Schemas

**Jobs**:
```yaml
title: "Job Title"
company: "Company Name"
location: "City, State"
range: "Month YYYY - Month YYYY"
url: "https://company.com"
companyRank: 1
```

**Certifications**:
```yaml
title: "Certification Name"
company: "Provider"
issueDate: "YYYY-MM-DD"
expiryDate: "YYYY-MM-DD"  # optional
url: "https://verify.com"
show: true
certRank: 1
companyRank: 1
```

**Featured Projects**:
```yaml
title: "Project Name"
cover: "./image.png"
tech:
  - Technology 1
  - Technology 2
github: "https://github.com/..."
external: "https://project.com"
classified: false  # optional
date: "YYYY-MM-DD"
```

**Blog Posts**:
```yaml
title: "Post Title"
slug: "/blog/post-slug/"
date: "YYYY-MM-DD"
tags:
  - tag1
  - tag2
draft: false  # optional
```

---

### 9. SEO & Performance

#### SEO Features
- Custom Head component for meta tags
- Dynamic page titles and descriptions
- Open Graph tags
- Sitemap generation with custom priorities
- Robots.txt
- Semantic HTML structure
- Accessibility (ARIA attributes, skip links)

#### Performance Optimizations
- Image optimization (sharp, WEBP/AVIF)
- Code splitting (lazy loading sections)
- Preact replacement in production
- Minified CSS-in-JS
- Bundle analysis available
- Static site generation
- Netlify deployment optimizations

---

### 10. Animation Features

#### Animation Libraries
- **AnimJS**: Advanced animation choreography
- **ScrollReveal**: Scroll-triggered animations
- **react-transition-group**: Component transition animations

#### Animation Patterns
- Fade-in on page load
- Fade-down for nav items
- Scroll-triggered reveals
- Hover state transitions
- Transform animations
- Staggered delays
- Reduced motion support

---

### 11. Accessibility Features

- Skip to content link
- Keyboard navigation support
- ARIA labels and roles
- Focus visible states
- Reduced motion detection
- Semantic HTML
- Alt text for images
- Tab navigation for job/cert sections

---

### 12. Development Workflow

#### Code Quality
- **ESLint**: JavaScript linting
- **Prettier**: Code formatting
- **husky**: Git hooks
- **lint-staged**: Pre-commit checks

#### Scripts
- `npm run develop`: Development server
- `npm run build`: Production build
- `npm run serve`: Serve built site
- `npm run clean`: Clean Gatsby cache
- `npm run format`: Format code

---

## GraphQL Data Flow

### Data Sources
1. **Markdown Files**:
   - Jobs (`src/frontend/content/jobs/`)
   - Certifications (`src/frontend/content/certs/`)
   - Featured Projects (`src/frontend/content/featured/`)
   - Blog Posts (`src/frontend/content/posts/`)

2. **Images**:
   - Static images (`src/frontend/images/`)
   - Markdown-referenced images (processed by sharp)

### Query Types
1. **Page Queries**: Executed at build time for page components
2. **Static Queries**: Executed at build time for non-page components (useStaticQuery)
3. **Template Queries**: Parameterized queries for dynamic pages

### GraphQL Schema
- **MarkdownRemark**: Processed markdown files
  - `frontmatter`: YAML metadata
  - `html`: Rendered HTML
  - `fileAbsolutePath`: File path for filtering
- **ImageSharp**: Processed images
  - `gatsbyImageData`: Optimized image data
  - `childImageSharp`: Image transformation node

---

## Component Dependencies

### Third-Party Component Usage
- **GatsbyImage** (`gatsby-plugin-image`): Optimized images
- **StaticImage** (`gatsby-plugin-image`): Static image optimization
- **Link** (`gatsby`): Client-side navigation
- **CSSTransition/TransitionGroup** (`react-transition-group`): Animations
- **styled-components**: All styling
- **PropTypes**: Runtime type checking

### Internal Component Hierarchy
```
Layout
├── Head (SEO)
├── Nav
│   ├── Logo (IconLogo, IconHex)
│   └── Menu (mobile)
├── Social
├── Email
└── Footer

IndexPage (Homepage)
├── Hero
├── About
├── Jobs
├── Featured
├── Certs
├── Projects
└── Contact

BlogPage
└── Post Cards

PostTemplate
└── Post Content

TagTemplate
└── Filtered Posts
```

---

## State Management

### Local Component State
- All state is managed with React hooks
- No global state management library (Redux, Context API not used)
- State patterns:
  - `useState` for UI state
  - `useRef` for DOM references
  - `useEffect` for side effects
  - Custom hooks for reusable logic

### State Examples
- Active tab indices (Jobs, Certs)
- Loading states
- Menu open/closed
- Scroll position
- Animation mount states

---

## Routing & Navigation

### Static Routes
- `/` - Homepage
- `/blog` - Blog index
- `/404` - Not found page

### Dynamic Routes (Generated)
- `/blog/post-slug/` - Individual posts
- `/blog/tags/tag-name/` - Tag archives

### Redirects
- `/archive` → `/blog` (permanent)

### Navigation Patterns
- Hash navigation for homepage sections (/#about, /#jobs, etc.)
- Smooth scroll to sections
- Breadcrumb navigation in blog posts
- Back-to-top in footer (likely)

---

## Build Output

### Generated Files
- Static HTML for all pages
- Optimized JavaScript bundles
- Processed images (multiple formats/sizes)
- CSS-in-JS extracted styles
- Sitemap XML
- Robots.txt
- Service worker (removed/disabled)
- Webpack stats (optional)

### Deployment Target
- **Netlify**: Primary platform
- Uses Netlify adapter for optimizations
- Static site hosting
- CDN distribution

---

## Summary of Features

### Core Features (Implemented)
✅ Responsive portfolio website
✅ About section with skills
✅ Work experience with tabs
✅ Featured projects showcase
✅ Certifications display with status tracking
✅ Blog system with posts and tags
✅ SEO optimization
✅ Image optimization
✅ Scroll animations
✅ Dark theme
✅ Mobile responsive
✅ Accessibility features
✅ Google Analytics
✅ Performance optimizations

### Disabled/Incomplete Features
❌ Additional projects grid (commented out)
❌ Service worker/PWA (explicitly removed)
❌ Contact form (likely just email link)

---

## Technical Debt & Considerations

1. **PropTypes**: Using PropTypes instead of TypeScript
2. **No Type Safety**: Standard JavaScript throughout
3. **Hardcoded Content**: Some content (skills list) hardcoded in components
4. **Animation Libraries**: Multiple animation libraries (could consolidate)
5. **Preact**: Using Preact in production (React in development)
6. **Commented Code**: Projects section has commented-out code
7. **Import Aliases**: Already configured for TS migration

---

## Conclusion

This portfolio website is a well-structured, modern React/Gatsby application with comprehensive features including a blog system, project showcases, work experience display, and certifications tracking. It leverages GraphQL for content management, styled-components for styling, and implements best practices for SEO, accessibility, and performance. The codebase is ready for TypeScript migration with webpack aliases already configured and a clear component structure.
